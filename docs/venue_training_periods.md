# 競馬場別学習期間設定

## 基本設定
- **デフォルト学習期間**: 2020年〜2025年

## 競馬場別の特別設定

### 大井競馬場（コード: 44）
- **学習期間**: 2023年〜2025年
- **理由**: 大幅な改修工事により、コース特性が変化
- **注意**: 2022年以前のデータは使用しない

### 名古屋競馬場（コード: 48）
- **学習期間**: 2022年〜2025年
- **理由**: 大幅な改修工事により、コース特性が変化
- **注意**: 2021年以前のデータは使用しない

## その他の競馬場

以下の競馬場は**デフォルト期間（2020年〜2025年）**を使用：

- 門別（30）: 2020-2025
- 帯広（33）: 2020-2025
- 盛岡（35）: 2020-2025
- 水沢（36）: 2020-2025
- 浦和（42）: 2020-2025
- 船橋（43）: 2020-2025
- 川崎（45）: 2020-2025
- 金沢（46）: 2020-2025
- 笠松（47）: 2020-2025
- 園田（50）: 2020-2025
- 姫路（51）: 2020-2025
- 高知（54）: 2020-2025
- 佐賀（55）: 2020-2025

---

## データ抽出コマンド例

### 大井競馬場
```bash
python extract_training_data_v2.py --keibajo 44 --start-date 2023 --end-date 2025 --output ooi_2023-2025_v3.csv
```

### 名古屋競馬場
```bash
python extract_training_data_v2.py --keibajo 48 --start-date 2022 --end-date 2025 --output nagoya_2022-2025_v3.csv
```

### その他の競馬場（例: 船橋）
```bash
python extract_training_data_v2.py --keibajo 43 --start-date 2020 --end-date 2025 --output funabashi_2020-2025_v3.csv
```

---

## 一括抽出スクリプト案

各競馬場の適切な期間でデータを一括抽出するスクリプト：

```python
# extract_all_venues.py
VENUE_PERIODS = {
    '30': ('2020', '2025', '門別'),
    '33': ('2020', '2025', '帯広'),
    '35': ('2020', '2025', '盛岡'),
    '36': ('2020', '2025', '水沢'),
    '42': ('2020', '2025', '浦和'),
    '43': ('2020', '2025', '船橋'),
    '44': ('2023', '2025', '大井'),  # 改修工事
    '45': ('2020', '2025', '川崎'),
    '46': ('2020', '2025', '金沢'),
    '47': ('2020', '2025', '笠松'),
    '48': ('2022', '2025', '名古屋'),  # 改修工事
    '50': ('2020', '2025', '園田'),
    '51': ('2020', '2025', '姫路'),
    '54': ('2020', '2025', '高知'),
    '55': ('2020', '2025', '佐賀'),
}
```

---

## 注意事項

### 改修工事の影響
- コース距離・形状の変更
- 馬場状態の変化
- 走破タイムの基準変更

### データの一貫性
- 改修前後のデータを混在させない
- 過去走データも改修後のものを優先
- 改修前のデータは特徴量として使用しない方が良い

---

## Phase 3 での活用

### 競馬場別モデル作成時
- 各競馬場に適切な期間のデータを使用
- 大井: 2023-2025
- 名古屋: 2022-2025
- その他: 2020-2025

### 全体モデル作成時
- 各競馬場のデータを適切な期間で結合
- 競馬場コードを特徴量として使用

---

## 更新履歴
- 2026-02-04: 初版作成（大井・名古屋の特別期間設定）
