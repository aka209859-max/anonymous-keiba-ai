# âœ… å…¨14ç«¶é¦¬å ´å¯¾å¿œå®Œäº†ãƒ¬ãƒãƒ¼ãƒˆ

**æ—¥æ™‚**: 2026-02-08  
**ãƒ–ãƒ©ãƒ³ãƒ**: `phase0_complete_fix_2026_02_07`  
**æœ€çµ‚ã‚³ãƒŸãƒƒãƒˆ**: `5ec88c0`

---

## ğŸ¯ å®Ÿè£…å†…å®¹

### å¤‰æ›´ç‚¹
`run_all.bat` ã®ãƒ¢ãƒ‡ãƒ«æŒ‡å®šã‚’**ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªæŒ‡å®š**ã«å¤‰æ›´ã—ã€è‡ªå‹•æ¤œå‡ºæ©Ÿèƒ½ã‚’æœ‰åŠ¹åŒ–ã—ã¾ã—ãŸã€‚

---

## ğŸ“Š å¤‰æ›´å†…å®¹ã®è©³ç´°

### Beforeï¼ˆæ—§æ–¹å¼ï¼‰
```batch
# Phase 3-4 ã§ãƒ¢ãƒ‡ãƒ«ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ãƒãƒ¼ãƒ‰ã‚³ãƒ¼ãƒ‰æŒ‡å®š
set BINARY_MODEL=models\binary\saga_2020-2025_v3_model.txt          # ä½è³€å›ºå®š
set RANKING_MODEL=models\ranking\saga_2020-2025_v3_with_race_id_ranking_model.txt
set REGRESSION_MODEL=models\regression\saga_2020-2025_v3_time_regression_model.txt

python scripts\phase3_binary\predict_phase3_inference.py "%FEATURES_CSV%" "%BINARY_MODEL%" "%OUTPUT_P3%"
```

**å•é¡Œç‚¹**:
- ä½è³€å°‚ç”¨ã«ãƒãƒ¼ãƒ‰ã‚³ãƒ¼ãƒ‰ã•ã‚Œã¦ã„ã‚‹
- ä»–ã®13ç«¶é¦¬å ´ã§ã¯å‹•ä½œã—ãªã„
- ãƒ¢ãƒ‡ãƒ«ãƒ•ã‚¡ã‚¤ãƒ«åã‚’14ç«¶é¦¬å ´Ã—3ãƒ¢ãƒ‡ãƒ«åˆ†ç®¡ç†ã™ã‚‹å¿…è¦ãŒã‚ã‚‹

---

### Afterï¼ˆæ–°æ–¹å¼ï¼‰
```batch
# Phase 3-4 ã§ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã®ã¿æŒ‡å®šã€ç«¶é¦¬å ´ã¯è‡ªå‹•æ¤œå‡º
python scripts\phase3_binary\predict_phase3_inference.py "%FEATURES_CSV%" models\binary "%OUTPUT_P3%"
python scripts\phase4_ranking\predict_phase4_ranking_inference.py "%FEATURES_CSV%" models\ranking "%OUTPUT_P4_RANK%"
python scripts\phase4_regression\predict_phase4_regression_inference.py "%FEATURES_CSV%" models\regression "%OUTPUT_P4_REG%"
```

**ãƒ¡ãƒªãƒƒãƒˆ**:
- âœ… å…¨14ç«¶é¦¬å ´ã§åŒã˜ã‚³ãƒãƒ³ãƒ‰
- âœ… ãƒ•ã‚¡ã‚¤ãƒ«åã‹ã‚‰ç«¶é¦¬å ´ã‚’è‡ªå‹•æ¤œå‡º
- âœ… é©åˆ‡ãªãƒ¢ãƒ‡ãƒ«ãƒ•ã‚¡ã‚¤ãƒ«ã‚’è‡ªå‹•é¸æŠ
- âœ… å­¦ç¿’æœŸé–“ã®é•ã„ã‚‚è‡ªå‹•å¯¾å¿œï¼ˆå¤§äº•: 2023-2025ã€åå¤å±‹: 2022-2025ï¼‰

---

## ğŸš€ ä½¿ç”¨æ–¹æ³•ï¼ˆå¤‰æ›´ãªã—ï¼‰

```bash
# ä½è³€ï¼ˆã‚³ãƒ¼ãƒ‰55ï¼‰ã§ 2026-02-07 ã‚’å®Ÿè¡Œ
run_all.bat 55 2026-02-07

# å·å´ï¼ˆã‚³ãƒ¼ãƒ‰45ï¼‰ã§ 2026-02-10 ã‚’å®Ÿè¡Œ
run_all.bat 45 2026-02-10

# å¤§äº•ï¼ˆã‚³ãƒ¼ãƒ‰44ï¼‰ã§ 2026-02-12 ã‚’å®Ÿè¡Œ
run_all.bat 44 2026-02-12
```

**ä½¿ã„æ–¹ã¯å®Œå…¨ã«åŒã˜ã§ã™ï¼**

---

## ğŸ“‹ å¯¾å¿œç«¶é¦¬å ´ä¸€è¦§ï¼ˆå…¨14å ´ï¼‰

| ã‚³ãƒ¼ãƒ‰ | ç«¶é¦¬å ´ | ãƒ­ãƒ¼ãƒå­— | å­¦ç¿’æœŸé–“ |
|--------|--------|----------|----------|
| 30 | é–€åˆ¥ | monbetsu | 2020-2025 |
| 35 | ç››å²¡ | morioka | 2020-2025 |
| 36 | æ°´æ²¢ | mizusawa | 2020-2025 |
| 42 | æµ¦å’Œ | urawa | 2020-2025 |
| 43 | èˆ¹æ©‹ | funabashi | 2020-2025 |
| 44 | å¤§äº• | ooi | **2023-2025** |
| 45 | å·å´ | kawasaki | 2020-2025 |
| 46 | é‡‘æ²¢ | kanazawa | 2020-2025 |
| 47 | ç¬ æ¾ | kasamatsu | 2020-2025 |
| 48 | åå¤å±‹ | nagoya | **2022-2025** |
| 50 | åœ’ç”° | sonoda | 2020-2025 |
| 51 | å§«è·¯ | himeji | 2020-2025 |
| 54 | é«˜çŸ¥ | kochi | 2020-2025 |
| 55 | ä½è³€ | saga | 2020-2025 |

---

## ğŸ—ï¸ ãƒ•ã‚¡ã‚¤ãƒ«æ§‹æˆï¼ˆå¤‰æ›´ãªã—ï¼‰

```
E:\anonymous-keiba-ai\
â”œâ”€â”€ run_all.bat                    â† ğŸ”„ æ›´æ–°ï¼ˆè‡ªå‹•æ¤œå‡ºå¯¾å¿œï¼‰
â”œâ”€â”€ scripts\
â”‚   â”œâ”€â”€ utils\
â”‚   â”‚   â”œâ”€â”€ __init__.py            â† ğŸ†• è¿½åŠ 
â”‚   â”‚   â””â”€â”€ keibajo_mapping.py     â† ğŸ†• è¿½åŠ ï¼ˆç«¶é¦¬å ´ãƒãƒƒãƒ”ãƒ³ã‚°ï¼‰
â”‚   â”œâ”€â”€ phase0_data_acquisition\
â”‚   â”‚   â””â”€â”€ extract_race_data.py
â”‚   â”œâ”€â”€ phase1_feature_engineering\
â”‚   â”‚   â””â”€â”€ prepare_features.py
â”‚   â”œâ”€â”€ phase3_binary\
â”‚   â”‚   â””â”€â”€ predict_phase3_inference.py    â† ğŸ”„ è‡ªå‹•æ¤œå‡ºå¯¾å¿œ
â”‚   â”œâ”€â”€ phase4_ranking\
â”‚   â”‚   â””â”€â”€ predict_phase4_ranking_inference.py    â† ğŸ”„ è‡ªå‹•æ¤œå‡ºå¯¾å¿œ
â”‚   â”œâ”€â”€ phase4_regression\
â”‚   â”‚   â””â”€â”€ predict_phase4_regression_inference.py â† ğŸ”„ è‡ªå‹•æ¤œå‡ºå¯¾å¿œ
â”‚   â””â”€â”€ phase5_ensemble\
â”‚       â”œâ”€â”€ ensemble_predictions.py
â”‚       â””â”€â”€ generate_distribution.py
â”œâ”€â”€ models\
â”‚   â”œâ”€â”€ binary\
â”‚   â”‚   â”œâ”€â”€ saga_2020-2025_v3_model.txt
â”‚   â”‚   â”œâ”€â”€ kawasaki_2020-2025_v3_model.txt
â”‚   â”‚   â””â”€â”€ ... (å…¨14ç«¶é¦¬å ´)
â”‚   â”œâ”€â”€ ranking\
â”‚   â”‚   â””â”€â”€ ... (å…¨14ç«¶é¦¬å ´)
â”‚   â””â”€â”€ regression\
â”‚       â””â”€â”€ ... (å…¨14ç«¶é¦¬å ´)
â””â”€â”€ data\
```

---

## ğŸ”„ ãƒ­ãƒ¼ã‚«ãƒ«ç’°å¢ƒã¸ã®é©ç”¨

```bash
cd E:\anonymous-keiba-ai
git fetch origin
git checkout phase0_complete_fix_2026_02_07
git pull origin phase0_complete_fix_2026_02_07
```

---

## ğŸ¯ å®Ÿè¡Œä¾‹

### ä½è³€ï¼ˆ2026-02-07ï¼‰

```bash
run_all.bat 55 2026-02-07
```

**å‡ºåŠ›**:
```
============================================================
åœ°æ–¹ç«¶é¦¬AIäºˆæƒ³ã‚·ã‚¹ãƒ†ãƒ  ä¸€æ‹¬å®Ÿè¡Œï¼ˆå…¨14ç«¶é¦¬å ´å¯¾å¿œï¼‰
============================================================
ç«¶é¦¬å ´: ä½è³€ (ã‚³ãƒ¼ãƒ‰: 55)
å¯¾è±¡æ—¥ä»˜: 2026-02-07
============================================================

[Phase 0] ãƒ‡ãƒ¼ã‚¿å–å¾—ä¸­...
[OK] Phase 0 å®Œäº†

[Phase 1] ç‰¹å¾´é‡ä½œæˆä¸­...
[OK] Phase 1 å®Œäº†

[Phase 3] äºŒå€¤åˆ†é¡äºˆæ¸¬ä¸­...
  ç«¶é¦¬å ´è‡ªå‹•æ¤œå‡º: ä½è³€
[ç«¶é¦¬å ´æ¤œå‡º] ä½è³€ â†’ ãƒ¢ãƒ‡ãƒ«: saga_2020-2025_v3_model.txt  â† è‡ªå‹•æ¤œå‡ºï¼
[OK] Phase 3 å®Œäº†

[Phase 4-1] ãƒ©ãƒ³ã‚­ãƒ³ã‚°äºˆæ¸¬ä¸­...
  ç«¶é¦¬å ´è‡ªå‹•æ¤œå‡º: ä½è³€
[ç«¶é¦¬å ´æ¤œå‡º] ä½è³€ â†’ ãƒ¢ãƒ‡ãƒ«: saga_2020-2025_v3_with_race_id_ranking_model.txt
[OK] Phase 4-1 å®Œäº†

[Phase 4-2] å›å¸°äºˆæ¸¬ä¸­...
  ç«¶é¦¬å ´è‡ªå‹•æ¤œå‡º: ä½è³€
[ç«¶é¦¬å ´æ¤œå‡º] ä½è³€ â†’ ãƒ¢ãƒ‡ãƒ«: saga_2020-2025_v3_time_regression_model.txt
[OK] Phase 4-2 å®Œäº†

[Phase 5] ã‚¢ãƒ³ã‚µãƒ³ãƒ–ãƒ«çµ±åˆä¸­...
[OK] Phase 5 å®Œäº†

[Phase 6] é…ä¿¡ç”¨ãƒ†ã‚­ã‚¹ãƒˆç”Ÿæˆä¸­...
[OK] Phase 6 å®Œäº†

============================================================
å…¨ãƒ•ã‚§ãƒ¼ã‚ºå®Œäº†
============================================================
```

---

### å·å´ï¼ˆ2026-02-10ï¼‰

```bash
run_all.bat 45 2026-02-10
```

**è‡ªå‹•çš„ã«å·å´ã®ãƒ¢ãƒ‡ãƒ«ãŒé¸æŠã•ã‚Œã¾ã™**:
```
[ç«¶é¦¬å ´æ¤œå‡º] å·å´ â†’ ãƒ¢ãƒ‡ãƒ«: kawasaki_2020-2025_v3_model.txt
```

---

### å¤§äº•ï¼ˆ2026-02-12ï¼‰

```bash
run_all.bat 44 2026-02-12
```

**å­¦ç¿’æœŸé–“ã®é•ã„ã‚‚è‡ªå‹•å¯¾å¿œ**:
```
[ç«¶é¦¬å ´æ¤œå‡º] å¤§äº• â†’ ãƒ¢ãƒ‡ãƒ«: ooi_2023-2025_v3_model.txt  â† 2023é–‹å§‹
```

---

## ğŸ“ æŠ€è¡“è©³ç´°

### è‡ªå‹•æ¤œå‡ºã®ä»•çµ„ã¿

1. **ãƒ•ã‚¡ã‚¤ãƒ«åã‹ã‚‰ç«¶é¦¬å ´åã‚’æŠ½å‡º**
   ```python
   # å…¥åŠ›: ä½è³€_20260207_features.csv
   # å‡ºåŠ›: 'ä½è³€'
   keibajo_name = extract_keibajo_from_filename(features_csv)
   ```

2. **ç«¶é¦¬å ´åã‹ã‚‰ãƒ¢ãƒ‡ãƒ«ãƒ•ã‚¡ã‚¤ãƒ«åã‚’ç”Ÿæˆ**
   ```python
   # å…¥åŠ›: 'ä½è³€', 'binary'
   # å‡ºåŠ›: 'saga_2020-2025_v3_model.txt'
   model_filename = get_model_filename(keibajo_name, 'binary')
   ```

3. **ãƒ¢ãƒ‡ãƒ«ãƒ‘ã‚¹ã‚’å®Œæˆ**
   ```python
   # æœ€çµ‚ãƒ‘ã‚¹: models/binary/saga_2020-2025_v3_model.txt
   model_path = os.path.join(models_dir, model_filename)
   ```

---

## âœ… å‹•ä½œç¢ºèªãƒã‚§ãƒƒã‚¯ãƒªã‚¹ãƒˆ

### Phase 3-4 å®Ÿè¡Œæ™‚ã®ç¢ºèªãƒã‚¤ãƒ³ãƒˆ

å®Ÿè¡Œãƒ­ã‚°ã«ä»¥ä¸‹ã®ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ãŒè¡¨ç¤ºã•ã‚Œã¦ã„ã‚Œã°æ­£å¸¸å‹•ä½œï¼š

```
[ç«¶é¦¬å ´æ¤œå‡º] {ç«¶é¦¬å ´å} â†’ ãƒ¢ãƒ‡ãƒ«: {ãƒ¢ãƒ‡ãƒ«ãƒ•ã‚¡ã‚¤ãƒ«å}
```

**ä¾‹**:
```
[ç«¶é¦¬å ´æ¤œå‡º] ä½è³€ â†’ ãƒ¢ãƒ‡ãƒ«: saga_2020-2025_v3_model.txt
[ç«¶é¦¬å ´æ¤œå‡º] å·å´ â†’ ãƒ¢ãƒ‡ãƒ«: kawasaki_2020-2025_v3_model.txt
[ç«¶é¦¬å ´æ¤œå‡º] å¤§äº• â†’ ãƒ¢ãƒ‡ãƒ«: ooi_2023-2025_v3_model.txt
```

ã“ã®ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ãŒè¡¨ç¤ºã•ã‚Œãªã„å ´åˆã€å¤ã„ã‚¹ã‚¯ãƒªãƒ—ãƒˆãŒå®Ÿè¡Œã•ã‚Œã¦ã„ã¾ã™ã€‚

---

## ğŸ”— Pull Request

**PR #4**: https://github.com/aka209859-max/anonymous-keiba-ai/pull/4

**å«ã¾ã‚Œã‚‹æ©Ÿèƒ½**:
1. âœ… Phase 0 SQLã‚¨ãƒ©ãƒ¼ä¿®æ­£
2. âœ… Phase 1-6 å…¨ã‚¹ã‚¯ãƒªãƒ—ãƒˆ
3. âœ… å…¨14ç«¶é¦¬å ´è‡ªå‹•æ¤œå‡ºæ©Ÿèƒ½
4. âœ… **run_all.bat ã®è‡ªå‹•æ¤œå‡ºå¯¾å¿œ** â† ğŸ†•

---

## ğŸ“Š å¤‰æ›´å±¥æ­´

### ã‚³ãƒŸãƒƒãƒˆ: `5ec88c0`
- **ã‚¿ã‚¤ãƒˆãƒ«**: `feat(run_all): enable auto-venue detection for all 14 racecourses`
- **å¤‰æ›´å†…å®¹**:
  - Phase 3-4 ã®ãƒ¢ãƒ‡ãƒ«ãƒ‘ã‚¹ã‚’ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªæŒ‡å®šã«å¤‰æ›´
  - MODEL_PREFIX å¤‰æ•°ã‚’å‰Šé™¤ï¼ˆä¸è¦ã«ãªã£ãŸï¼‰
  - ç«¶é¦¬å ´è‡ªå‹•æ¤œå‡ºãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’è¿½åŠ 
  - ä½¿ç”¨æ–¹æ³•ã¯å¤‰æ›´ãªã—

---

## ğŸ‰ ã¾ã¨ã‚

âœ… **å…¨14ç«¶é¦¬å ´å¯¾å¿œå®Œäº†**  
âœ… **æ—¢å­˜ã®ä½¿ã„æ–¹ã¯å®Œå…¨ã«ç¶­æŒ**  
âœ… **å†…éƒ¨ã§è‡ªå‹•æ¤œå‡ºãŒå‹•ä½œ**  
âœ… **æ¯æ—¥ã®é‹ç”¨ãŒå®¹æ˜“ã«**

**ä½¿ç”¨æ–¹æ³•**:
```bash
run_all.bat <ç«¶é¦¬å ´ã‚³ãƒ¼ãƒ‰> <æ—¥ä»˜>
```

ã“ã‚Œã ã‘ã§å…¨14ç«¶é¦¬å ´ã«å¯¾å¿œï¼

---

**ä½œæˆæ—¥**: 2026-02-08  
**æœ€çµ‚æ›´æ–°**: ã‚³ãƒŸãƒƒãƒˆ `5ec88c0`
